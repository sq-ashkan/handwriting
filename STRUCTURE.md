# پروژه تشخیص کاراکتر دست‌نویس (OCR)

## هدف اصلی
ساخت سیستمی که بتواند کاراکتر (حرف یا عدد) دست‌نویس که کاربر روی کاغذ می‌نویسد را آپلود و با دقت بالای ۹۹ درصد برای نمایش به سرمایه‌گذار در حالت دمو و تست کاربر واقعی تشخیص دهد.

## مشخصات محیط توسعه
- سیستم عامل: macOS
- پردازنده: Apple M2 Ultra
- اولویت: دقت بالا در شرایط واقعی بدون محدودیت زمانی و هزینه‌ای
- زبان کدنویسی: انگلیسی
- زبان مستندات: فارسی

## ساختار به‌روز شده پروژه
```
/Users/roammer/Documents/Github/handwriting/
├── src/                     # کدهای اصلی پروژه
│   ├── services/           # سرویس‌های اصلی
│   │   ├── downloaders/    # دانلودرهای دیتاست
│   │   │   ├── iam.py      # دانلودر IAM ✓
│   │   │   ├── emnist.py   # دانلودر EMNIST ✓
│   │   │   ├── mnist.py    # دانلودر MNIST ✓
│   │   │   ├── az.py       # دانلودر A-Z ✓
│   │   │   └── chars74k.py # دانلودر Chars74K ✓
│   │   ├── processors/    # پردازش‌کننده‌ها
│   │   │   ├── english_handwritten.py
│   │   │   ├── emnist_processor.py
│   │   │   ├── mnist_processor.py
│   │   │   ├── az_processor.py
│   │   │   └── chars74k_processor.py
│   │   ├── preprocessor/   # پردازش تصاویر
│   │   └── trainer/       # سیستم آموزش
│   ├── models/            # معماری مدل
│   │   ├── layers.py     # لایه‌های شبکه
│   │   └── network.py    # پیکربندی شبکه
│   └── lib/              # کتابخانه‌های کمکی
│       ├── utils.py      # توابع عمومی
│       ├── cache_manager.py  # مدیریت کش و فایل‌های موقت
│       └── constants.py  # متغیرهای ثابت
├── data/                  # دیتاست‌ها
│   ├── raw/              # داده‌های خام
│   │   ├── iam_handwriting/    # دیتاست IAM
│   │   │   ├── images/         # تصاویر با فرمت یکسان
│   │   │   └── documentation.txt   # فرمت IAM
│   │   ├── emnist/             # دیتاست EMNIST
│   │   │   ├── images/         # تصاویر همسان با IAM
│   │   │   └── documentation.txt   # فرمت مشابه IAM
│   │   ├── mnist/              # دیتاست MNIST
│   │   │   ├── images/         # تصاویر همسان با IAM
│   │   │   └── documentation.txt   # فرمت مشابه IAM
│   │   ├── az_handwritten/    # دیتاست A-Z
│   │   │   ├── images/        # تصاویر همسان با IAM
│   │   │   └── documentation.txt  # فرمت مشابه IAM
│   │   └── chars74k/         # دیتاست Chars74K
│   │       ├── images/       # تصاویر ۲۷x۲۷ پیکسل
│   │       └── documentation.txt  # فرمت IAM
│   ├── processed/           # داده‌های پردازش شده
│   ├── temp/               # داده‌های موقت
│   │   ├── EH/            # داده‌های موقت English Handwritten
│   │   │   ├── images/    
│   │   │   └── documentation.txt
│   │   ├── EMNIST/        # داده‌های موقت EMNIST
│   │   │   ├── images/    
│   │   │   └── documentation.txt
│   │   ├── MNIST/         # داده‌های موقت MNIST
│   │   │   ├── images/    
│   │   │   └── documentation.txt
│   │   ├── AZ/            # داده‌های موقت A-Z
│   │   │   ├── images/    
│   │   │   └── documentation.txt
│   │   └── Chars74K/      # داده‌های موقت Chars74K
│   │       ├── images/    
│   │       └── documentation.txt
│   └── logs/               # گزارش‌ها
├── tests/                  # تست‌ها
│   ├── test_downloaders/
│   ├── test_preprocessor/
│   └── test_trainer/
└── requirements.txt        # وابستگی‌ها
```

## فازهای پروژه

### فاز ۱: جمع‌آوری داده ✓
دانلود و یکپارچه‌سازی پنج دیتاست IAM، EMNIST، MNIST، A-Z و Chars74K با ساختار مشابه انجام شد.

### فاز ۲: پردازش اولیه تصاویر
پردازش‌های ضروری برای رسیدن به بالاترین دقت:

1. پردازش‌های پایه:
   - کراپ خودکار تصویر و حذف حاشیه‌های اضافی
   - تنظیم اندازه تصاویر به 27x27 پیکسل
   - نرمال‌سازی کنتراست و روشنایی
   - تبدیل به مقیاس خاکستری

2. پیش‌پردازش پیشرفته:
   - حذف نویز با فیلترهای گوسین و میانه
   - تصحیح چرخش با تشخیص زاویه خط پایه
   - بهبود کنتراست محلی با CLAHE
   - باینری کردن تطبیقی با آستانه‌گذاری Otsu
   - اسکلت‌سازی برای استخراج ویژگی‌های اصلی حروف

3. افزایش داده (Data Augmentation):
   - چرخش جزئی (±5 درجه)
   - تغییر مقیاس (±10%)
   - تغییر پرسپکتیو
   - افزودن نویز گوسی کنترل‌شده
   - تغییر شدت روشنایی
   - اعوجاج الاستیک برای شبیه‌سازی تغییرات دست‌خط

4. استخراج ویژگی‌های پیشرفته:
   - HOG (Histogram of Oriented Gradients)
   - LBP (Local Binary Patterns)
   - Zoning features
   - Contour features
   - Gradient features
   - تبدیل موجک برای آنالیز چندمقیاسه

### فاز ۳: مدل‌سازی
- طراحی و پیاده‌سازی شبکه عصبی عمیق
- آزمایش معماری‌های مختلف (CNN، ResNet، DenseNet)
- پیاده‌سازی Transfer Learning
- تنظیم هایپرپارامترها

### فاز ۴: آموزش
- آموزش با دیتاست ترکیبی
- اعتبارسنجی متقابل
- تنظیم مدل
- ذخیره بهترین مدل‌ها

### فاز ۵: تست و ارزیابی
- تست با داده‌های واقعی
- ارزیابی دقت
- آنالیز خطاها
- بهینه‌سازی نهایی

### فاز ۶: تست واقعی
- تست با دست‌خط واقعی پست شده
- جمع‌آوری بازخورد
- اصلاح و بهبود

### فاز ۷: پیاده‌سازی سرور
- پیاده‌سازی API با Flask
- بهینه‌سازی عملکرد
- مدیریت خطاها
- امنیت و کش‌گذاری

### فاز ۸: رابط کاربری
- طراحی و پیاده‌سازی UI با React
- آپلود تصویر
- نمایش نتایج
- رابط کاربری ساده و کاربرپسند